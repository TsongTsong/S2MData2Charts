<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>S2M Data Visualisation</title>

    <script src="lib/js/amcharts_3.19.6.free/amcharts/amcharts.js"></script>
    <script src="lib/js/amcharts_3.19.6.free/amcharts/xy.js"></script>
    <script src="lib/js/amcharts_3.19.6.free/amcharts/pie.js"></script>
    <script src="lib/js/amcharts_3.19.6.free/amcharts/themes/light.js"></script>
    <script src="lib/js/jquery-2.0.0.min.js"></script>

    <style>
        #pieChartContainer {
            width		: 100%;
            height		: 435px;
            font-size	: 11px;
        }
        .center {
            text-align  : center;
        }
        .container-fluid {
            text-align  : center;
        }
        #xyChartContainer_1_old {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }
        #xyChartContainer_1_new {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }

        #xyChartContainer_2_old {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }
        #xyChartContainer_2_new {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }

        #xyChartContainer_3_old {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }
        #xyChartContainer_3_new {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }

        #xyChartContainer_4_old {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }
        #xyChartContainer_4_new {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }

        #xyChartContainer_5_old {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }
        #xyChartContainer_5_new {
            width		: 100%;
            height		: 500px;
            font-size	: 11px;
        }
    </style>

    <script type="text/javascript">
        var pieChartData = [];
        var xyChartData = []; //JsonArray

        var pieChart = AmCharts.makeChart( "pieChartContainer", {
            "type": "pie",
            "theme": "light",
            "dataProvider": [],
            "valueField": "CoverageValue",
            "titleField": "CoverageType",
            "outlineAlpha": 0.4,
            "depth3D": 15,
            "balloonText": "[[title]]<br><span style='font-size:18px'><b>[[value]]</b> ([[percents]]%)</span>",
            "angle": 30,
            "export": {
                "enabled": true
            }
        }, 5000);
        pieChart.dataProvider = pieChartData;
        pieChart.write('pieChartContainer');


        var xyChart_1_old = AmCharts.makeChart("xyChartContainer_1_old", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Complete Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[OldPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "OldPepNumAtoms",
                "yField": "OldPepExecutionCompleteTime",
                "lineColor": "#008000",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_1_old.dataProvider = xyChartData;
        xyChart_1_old.write('xyChartContainer_1_old');

        var xyChart_1_new = AmCharts.makeChart("xyChartContainer_1_new", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Complete Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[NewPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "NewPepNumAtoms",
                "yField": "NewPepExecutionCompleteTime",
                "lineColor": "#008000",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_1_new.dataProvider = xyChartData;
        xyChart_1_new.write('xyChartContainer_1_new');


        var xyChart_2_old = AmCharts.makeChart("xyChartContainer_2_old", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Isomorphism Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[OldPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "OldPepNumAtoms",
                "yField": "OldPepExecIsomorphismTime",
                "lineColor": "#FF00FF",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_2_old.dataProvider = xyChartData;
        xyChart_2_old.write('xyChartContainer_2_old');

        var xyChart_2_new = AmCharts.makeChart("xyChartContainer_2_new", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Isomorphism Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[NewPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "NewPepNumAtoms",
                "yField": "NewPepExecIsomorphismTime",
                "lineColor": "#FF00FF",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_2_new.dataProvider = xyChartData;
        xyChart_2_new.write('xyChartContainer_2_new');


        var xyChart_3_old = AmCharts.makeChart("xyChartContainer_3_old", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Isomorphism Strict Matching Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[OldPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "OldPepNumAtoms",
                "yField": "OldPepExecIsomorStrictMatchTime",
                "lineColor": "#FF6600",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_3_old.dataProvider = xyChartData;
        xyChart_3_old.write('xyChartContainer_3_old');

        var xyChart_3_new = AmCharts.makeChart("xyChartContainer_3_new", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Isomorphism Strict Matching Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[NewPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "NewPepNumAtoms",
                "yField": "NewPepExecIsomorStrictMatchTime",
                "lineColor": "#FF6600",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_3_new.dataProvider = xyChartData;
        xyChart_3_new.write('xyChartContainer_3_new');


        var xyChart_4_old = AmCharts.makeChart("xyChartContainer_4_old", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Isomorphism Light Matching Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[OldPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "OldPepNumAtoms",
                "yField": "OldPepExecIsomorLightMatchTime",
                "lineColor": "#008080",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_4_old.dataProvider = xyChartData;
        xyChart_4_old.write('xyChartContainer_4_old');

        var xyChart_4_new = AmCharts.makeChart("xyChartContainer_4_new", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Isomorphism Light Matching Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[NewPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "NewPepNumAtoms",
                "yField": "NewPepExecIsomorLightMatchTime",
                "lineColor": "#008080",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_4_new.dataProvider = xyChartData;
        xyChart_4_new.write('xyChartContainer_4_new');


        var xyChart_5_old = AmCharts.makeChart("xyChartContainer_5_old", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Tiling Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[OldPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "OldPepNumAtoms",
                "yField": "OldPepExecTilingTime",
                "lineColor": "#9400D3",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_5_old.dataProvider = xyChartData;
        xyChart_5_old.write('xyChartContainer_5_old');

        var xyChart_5_new = AmCharts.makeChart("xyChartContainer_5_new", {
            "type": "xy",
            "theme": "light",
            "autoMarginOffset": 20,
            "dataProvider": [],
            "valueAxes": [{
                "position": "bottom",
                "axisAlpha": 0,
                "dashLength": 1,
                "title": "Number Of Atoms"
            }, {
                "axisAlpha": 0,
                "dashLength": 1,
                "position": "left",
                "title": "Tiling Time"
            }],
            "startDuration": 1,
            "graphs": [{
                "balloonText": "[[NewPeptideName]]([[x]], [[y]])",
                "bullet": "triangleUp",
                "lineAlpha": 0,
                "xField": "NewPepNumAtoms",
                "yField": "NewPepExecTilingTime",
                "lineColor": "#9400D3",
                "fillAlphas": 0
            }],
            "marginLeft": 64,
            "marginBottom": 60,
            "chartScrollbar": {},
            "chartCursor": {},
            "export": {
                "enabled": true,
                "position": "bottom-right"
            }
        }, 5000);
        xyChart_5_new.dataProvider = xyChartData;
        xyChart_5_new.write('xyChartContainer_5_new');
    </script>

    <script>
        $( document ).ready(function() {
            /*$.getJSON('Data/peptidesExecutionTimes.json')
                    .done(function (data) {
                        chartData = data;
                    });*/
            $.getJSON('data/oldPeptidesExecutionTimes.json', function (json) {
                var fullCoverage=0, partCoverage_1=0, partCoverage_2=0;
                for (var key in json) {
                    if (json.hasOwnProperty(key)) {
                        var item = json[key];
                        xyChartData.push({
                            OldPeptideName: item.PeptideName,
                            OldPepNumAtoms: item.PepNumAtoms,
                            OldPepExecutionCompleteTime: item.PepExecutionCompleteTime,
                            OldPepExecIsomorphismTime: item.PepExecIsomorphismTime,
                            OldPepExecIsomorStrictMatchTime: item.PepExecIsomorStrictMatchTime,
                            OldPepExecIsomorLightMatchTime: item.PepExecIsomorLightMatchTime,
                            OldPepExecTilingTime: item.PepExecTilingTime

                        });

                        var ratio = item.PepCoverageRatio;
                        if(ratio < 0.8){
                            partCoverage_2 ++;
                        }
                        else if(ratio == 1.0){
                            fullCoverage ++;
                        }
                        else{
                            partCoverage_1 ++;
                        }
                    }
                }
                pieChartData.push({
                    CoverageType: "100% Coverage",
                    CoverageValue: fullCoverage
                });
                pieChartData.push({
                    CoverageType: "<80% Coverage",
                    CoverageValue: partCoverage_2
                });
                pieChartData.push({
                    CoverageType: '80%<=Coverage<100%',
                    CoverageValue: partCoverage_1
                });
            });

            $.getJSON('data/newPeptidesExecutionTimes.json', function (json) {
               // var fullCoverage=0, partCoverage_1=0, partCoverage_2=0;
                for (var key in json) {
                    if (json.hasOwnProperty(key)) {
                        var item = json[key];
                        xyChartData.push({
                            NewPeptideName: item.PeptideName,
                            NewPepNumAtoms: item.PepNumAtoms,
                            NewPepExecutionCompleteTime: item.PepExecutionCompleteTime,
                            NewPepExecIsomorphismTime: item.PepExecIsomorphismTime,
                            NewPepExecIsomorStrictMatchTime: item.PepExecIsomorStrictMatchTime,
                            NewPepExecIsomorLightMatchTime: item.PepExecIsomorLightMatchTime,
                            NewPepExecTilingTime: item.PepExecTilingTime

                        });

                        /*var ratio = item.PepCoverageRatio;
                        if(ratio < 0.8){
                            partCoverage_2 ++;
                        }
                        else if(ratio == 1.0){
                            fullCoverage ++;
                        }
                        else{
                            partCoverage_1 ++;
                        }*/
                    }
                }
                /*pieChartData.push({
                    CoverageType: "100% Coverage",
                    CoverageValue: fullCoverage
                });
                pieChartData.push({
                    CoverageType: "<80% Coverage",
                    CoverageValue: partCoverage_2
                });
                pieChartData.push({
                    CoverageType: '80%<=Coverage<100%',
                    CoverageValue: partCoverage_1
                });*/
            });

            jQuery( '.chart-input' ).off().on( 'input change', function() {
                var property = jQuery( this ).data( 'property' );
                var target = pieChart;
                var value = Number( this.value );
                pieChart.startDuration = 0;

                if ( property == 'innerRadius' ) {
                    value += "%";
                }

                target[ property ] = value;
                pieChart.validateNow();
            } );

            console.log(pieChartData);
            console.log(xyChartData);
            console.log( "ready!" );
        });
    </script>

</head>
<body>

<h2 class="center">Percentage Of Coverage Display</h2>
<div id="pieChartContainer"></div>
<div class="container-fluid">
    <div class="row text-center" style="overflow:hidden;">
        <div class="col-sm-3" style="float: none !important;display: inline-block;">
            <label class="text-left">Angle:</label><br />
            <input class="chart-input" data-property="angle" type="range" min="0" max="60" value="30" step="1"/>
        </div>
        <div class="col-sm-3" style="float: none !important;display: inline-block;">
            <label class="text-left">Depth:</label><br />
            <input class="chart-input" data-property="depth3D" type="range" min="1" max="25" value="10" step="1"/>
        </div>
        <div class="col-sm-3" style="float: none !important;display: inline-block;">
            <label class="text-left">Inner-Radius:</label><br />
            <input class="chart-input" data-property="innerRadius" type="range" min="0" max="80" value="0" step="1"/>
        </div>
    </div>
</div>
<br />

<h1 class="center">Old Execution Time &nbsp&nbsp vs &nbsp&nbsp New Average Execution Time</h1>
<h2 class="center">Old Total Execution Time Display</h2>
<div id="xyChartContainer_1_old"></div>
<br />
<h2 class="center">New Total Average Execution Time Display</h2>
<div id="xyChartContainer_1_new"></div>
<br />

<h2 class="center">Old Isomorphism Execution Time Display</h2>
<div id="xyChartContainer_2_old"></div>
<br />
<h2 class="center">New Isomorphism Average Execution Time Display</h2>
<div id="xyChartContainer_2_new"></div>
<br />

<h2 class="center">Old Isomorphism Strict Execution Time Display</h2>
<div id="xyChartContainer_3_old"></div>
<br />
<h2 class="center">New Isomorphism Average Strict Execution Time Display</h2>
<div id="xyChartContainer_3_new"></div>
<br />

<h2 class="center">Old Isomorphism Light Execution Time Display</h2>
<div id="xyChartContainer_4_old"></div>
<br />
<h2 class="center">New Isomorphism Average Light Execution Time Display</h2>
<div id="xyChartContainer_4_new"></div>
<br />

<h2 class="center">Old Tiling Execution Time Display</h2>
<div id="xyChartContainer_5_old"></div>
<br />
<h2 class="center">New Tiling Average Execution Time Display</h2>
<div id="xyChartContainer_5_new"></div>
<br />

</body>
</html>